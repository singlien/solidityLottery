# solidityLottery
A bet script for fun between friends!


# 樂透彩LittleLottery
## **簡介：**

本智能合約為透過每人下注累積獎金，下注者將可以選擇一個號碼（0~50）號（號碼範圍由runner定），由runner執行開獎動作，將獎金發給中獎者。

假想有一天，三五好友間突然覺得人生缺乏樂趣，每天除了工作是工作，需要來賭一場大的來增進生活情調，於是其中一個人跳出來說，我來當莊家，就展開了好朋友之間的一場遊戲...本遊戲莊家不可參與但是可以收佣金，為推廣的誘因。人人可以買一個希望，中獎機率遠遠大於生活中的樂透彩，也許下一個大富翁就是你！

## **角色介紹；**

-   莊家，我們稱之為the runner
-   下注者，我們稱之為the gambler
-   中獎者，為其中一位下注者或無，我們稱之為the winner

## **我們的合約：**

-   是由一位runner透過下注者的執行來累積獎金
-   當建立合約時，runner會被任命為莊家
-   runner則邀請其他人去進行下注。用戶透過呼叫一個智能合約上的函式，將以太幣從下注者帳戶轉移到合約，並保存在以太幣於合約，直到開獎。
-   在合約時間內的所有人都能看到獎金的大小
-   runner將可以從每一筆投注中抽成
-   若無人中獎將會把下注金發還給投注者
-   runner本身不可下注，以防串供

## **合約流程：**

1.  runner投入起始獎金，建立合約，決定每筆最少下注金，決定佣金比率，決定號碼範圍
2.  gambler下注，選擇一個號碼，投入下注金（需高於最少下注金）
3.  runner收單，進行開獎（由runner決定一個號碼）
4.  比對所有下注者看是否中獎，將中獎者加入winner名單
5.  將獎金發給winner，若無人中獎則退還下注金給所有人（會扣除執行本合約所需要的gas之餘額）

## **合約有以下幾種方法：**

-   +LittleLottery：合約的建構子。將初始化合約的狀態。合約建立者傳入帳戶位置，有利於合約的draw。
-   +gamble：任何除合約建立者之外的人都可以呼叫下注，每筆下注金額需高於最低下注金額。下注者每注可選擇一個0~50的號碼。
-   +getCurrentTotalBonus：回傳當前儲存在合約中的總獎金。
-   +draw：限定合約建立者執行，輸入一個中獎號碼，與所有下注者進行比對，將中獎者加入中獎名單。
-   -drawdown：若本次有人中獎，將獎金扣除佣金之後平分並發送給中獎者。
-   -refund：若本次無人中獎，將所有獎金退回給下注者，runner將收不到佣金
